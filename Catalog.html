<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalog</title>

    <!-- Tab Icon -->
    <link rel="icon" href="Assets/HF Rockstar Emblem.png" type="image/png">

    <!-- Flowbite CSS -->
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.css" rel="stylesheet" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"> 
  

</head>
<body class="overflow-x-hidden">

<!-- NavBar Start-->
<section id="NavBarContainer">

</section>
<!-- NavBar End -->

<!-- == Product Start == -->
<section class="bg-stone-50 pt-24 py-8 antialiased md:pt-28 sm:pt-24">
    <div class="mx-auto max-w-screen-xl px-4 2xl:px-0">   
      <!-- Heading & Filters -->
      <div class="py-8 max-w-screen-xl text-center">
         <h1 class="mb-4 text-5xl font-extrabold tracking-tight leading-none text-zinc-900">Browse Our Catalog</h1>
        <p class="my-4 text-lg font-normal text-stone-700 lg:text-xl whitespace-pre-line">Each piece is a canvas of <span class="underline decoration-red-600 italic">creativity</span>.
                   Let the world know you're part of the crew that turns the <span class="font-bold text-stone-950">grind into glory.</span></p>     
      </div>
                
    </div>
</div>

<div class="container mx-auto">
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-4" id="ProductContainer">    
            <!-- Populated with Load__Featured.js --> 
        </div>
  </div>
</section>
<!-- == Product End == -->

<hr>

<!-- Cart Start -->
<div class="px-16 mb-16">
  <h2 class="text-2xl font-bold mt-10 mb-6">Shopping Cart</h2>
  <div id="cart" class="bg-white p-4 rounded-lg shadow-md">
      <p class="text-gray-700 mb-10">No items in cart.</p>
  </div>
  <div id="checkout-container" class="hidden text-center mt-4">
    <a href="Checkout.html">
      <button class="inline-block rounded-lg bg-red-600 px-8 py-3 text-center text-sm font-semibold text-white outline-none ring-red-500 transition duration-100 hover:bg-red-500 focus-visible:ring active:bg-red-700 md:text-base">
          Check out
      </button>
    </a>
  </div>
</div>
<!-- Cart End -->

<section id="FooterContainer">
  
</section>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Flowbite JS -->
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.js"></script>
    
    <!-- Local JavaScript -->
    <script src="JavaScript/Products__Storage.js"></script>
    <script src="JavaScript/Navigation Bar.js"></script>
    <script src="JavaScript/Populate.js"></script>
    <script src="JavaScript/Footer.js"></script> 

    <script>
    // Load cart from localStorage when page loads
let cart = JSON.parse(localStorage.getItem('cart')) || [];

function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart));
}

function addToCart(productName, productPrice) {
    const existingItem = cart.find(item => item.name === productName);

    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        const cartItem = { name: productName, price: productPrice, quantity: 1 };
        cart.push(cartItem);
    }

    saveCart();
    renderCart();
    showModal(); // Show the modal after adding to cart
}

function removeFromCart(productName) {
    cart = cart.filter(item => item.name !== productName);
    saveCart();
    renderCart();
}

function renderCart() {
    const cartContainer = document.getElementById('cart');
    const checkoutContainer = document.getElementById('checkout-container');
    cartContainer.innerHTML = '';

    if (cart.length === 0) {
        cartContainer.innerHTML = '<p class="text-gray-700">No items in cart.</p>';
        checkoutContainer.classList.add('hidden');
        return;
    }

    cart.forEach(item => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'flex justify-between mb-2 items-center';
        itemDiv.innerHTML = `
            <span>${item.name}</span>
            <span>₱${item.price.toFixed(2)} x ${item.quantity}</span>
            <button onclick="removeFromCart('${item.name}')" class="ml-4 text-red-500">Remove</button>
        `;
        cartContainer.appendChild(itemDiv);
    });

    const total = cart.reduce((acc, item) => acc + item.price * item.quantity, 0);
    const subtotal = total; // Or however you want to calculate it

    const totalDiv = document.createElement('div');
    totalDiv.className = 'flex justify-between mt-4 pt-4 border-t';
    totalDiv.innerHTML = `<strong>Total</strong><strong>₱${total.toFixed(2)}</strong>`;
    cartContainer.appendChild(totalDiv);

    // Store prices in localStorage
    localStorage.setItem('totalPrice', total.toFixed(2));
    localStorage.setItem('subtotalPrice', subtotal.toFixed(2));

    checkoutContainer.classList.remove('hidden');
}

function showModal() {
    document.getElementById('successModal').classList.remove('hidden');
}

function hideModal() {
    document.getElementById('successModal').classList.add('hidden');
}

// Close modal when the close button is clicked
document.getElementById('closeModal').addEventListener('click', hideModal);

// Render cart on page load
renderCart();

  </script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
      const productImages = document.querySelectorAll('.product-image');
      productImages.forEach(productImage => {
          const defaultImage = productImage.querySelector('.default-image');
          const hoverImage = productImage.querySelector('.hover-image');

          productImage.style.position = 'relative';
          defaultImage.style.transition = 'opacity 0.5s ease-in-out';
          hoverImage.style.transition = 'opacity 0.5s ease-in-out';
          hoverImage.style.position = 'absolute';
          hoverImage.style.top = '0';
          hoverImage.style.left = '0';
          hoverImage.style.opacity = '0';

          productImage.addEventListener('mouseover', () => {
              defaultImage.style.opacity = '0';
              hoverImage.style.opacity = '1';
          });

          productImage.addEventListener('mouseout', () => {
              defaultImage.style.opacity = '1';
              hoverImage.style.opacity = '0';
          });
      });
  });
</script>

</body>
</html>
